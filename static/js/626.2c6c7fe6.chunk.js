"use strict";(self.webpackChunkfeed_post=self.webpackChunkfeed_post||[]).push([[626],{2626:(e,n,t)=>{t.r(n),t.d(n,{default:()=>I});var s,i=t(5043),a=t(7170),d=t(5271),r=t(7528),o=t(197);const l=o.Ay.main(s||(s=(0,r.A)(["\n  margin-top: 80px;\n  height: 100%;\n  width:45%;\n  min-width: 600px;\n\n    @media (max-width: 600px) {\n    min-width: 100%;\n    width: 100%;\n    padding: 0px 10px;\n    }\n\n  .movieContainer{\n    margin-top: 10px;\n    padding: 10px;\n  }\n  .heading {\n    font-size: 1.5em;\n    font-weight: 400;\n    padding: 30px 0;\n    display: flex;\n  }\n\n  .feeds {\n    display: flex;\n    flex-direction: column;\n    flex-wrap: wrap;\n    gap: 20px;\n    min-height: 90vh;\n  }\n\n  .no_feeds {\n    text-align: center;\n    margin-top: 70px;\n    font-weight: 400;\n    font-size: 1.2em;\n    height: 90vh;\n    display: flex;\n    align-items:center;\n    justify-content: center;\n  }\n"])));var c=t(4427),u=t(5262),g=t(579);const p=e=>{var n;let{data:t,isFeedsLoading:s}=e;const a=(0,i.useRef)(null),d=(0,u.Te)({count:null===t||void 0===t?void 0:t.length,getScrollElement:()=>a.current,estimateSize:()=>35,overscan:5});return(0,g.jsx)(l,{children:null!==t&&void 0!==t&&t.length?(0,g.jsx)("div",{children:(0,g.jsx)("div",{className:"feeds",ref:a,children:null===d||void 0===d||null===(n=d.getVirtualItems())||void 0===n?void 0:n.map((e=>{var n;return(0,g.jsx)(c.A,{feedData:t[null===e||void 0===e?void 0:e.index]},null===(n=t[null===e||void 0===e?void 0:e.index])||void 0===n?void 0:n.id)}))})}):s?(0,g.jsx)("h1",{className:"no_feeds",children:"Fetching Posts!"}):(0,g.jsx)("h1",{className:"no_feeds",children:"There are no feeds!"})})},v=(0,i.memo)(p);var h=t(4497),f=t(9497);var m;const x=o.Ay.main(m||(m=(0,r.A)(["\n  top: 80px;\n  width:20%;\n  position: sticky;\n  max-width: 300px;\n  height: calc(100vh - 100px);\n  overflow: auto;\n  background: var(--feed-color);\n  border-radius: 30px;\n  padding: 20px;\n\n  @media (max-width: 900px) {\n    display: none;\n    }\n\n    .userWrapper{\n     display: flex;\n    flex-direction: column;\n    flex-wrap: wrap;\n    gap: 15px;\n    align-items: start;\n    }\n    .user{\n      display: flex;\n      align-items: center;\n      gap: 10px;\n    }\n    .no_users{\n      height: 100%;\n      display: flex;\n    align-items: center;\n    justify-content: center;\n    }\n\n"])));var y=t(7960);const w=e=>{let{users:n}=e;return(0,g.jsx)(x,{children:null!==n&&void 0!==n&&n.length?(0,g.jsx)("div",{children:(0,g.jsx)("div",{className:"userWrapper",children:null===n||void 0===n?void 0:n.map((e=>(0,g.jsxs)("div",{className:"user",children:[(0,g.jsx)(y.A,{imgSrc:null===e||void 0===e?void 0:e.profilePictureUrl,userName:null===e||void 0===e?void 0:e.name}),(0,g.jsx)("h3",{children:null===e||void 0===e?void 0:e.name})]},null===e||void 0===e?void 0:e.id)))})}):(0,g.jsx)("h3",{className:"no_users",children:"There are no Users!"})})},A=(0,i.memo)(w);var j;const S=o.Ay.main(j||(j=(0,r.A)(["\n  height: 100%;\n  width:100%;\n  display: flex;\n  justify-content: center;\n  gap: 30px;\n\n  .detailWrapper {\n    display: flex;\n  justify-content: center;\n  gap: 30px;\n    margin-top: 80px;\n  width:45%;\n  min-width: 600px;\n  height: 90vh;\n\n  @media (max-width: 600px) {\n    min-width: 100%;\n    width: 100%;\n    padding: 0px 10px;\n    }\n  }\n  "]))),P=()=>{const e=(0,h.wA)(),n=(0,h.d4)((e=>e)),t=f.Ay.getters.scrollPosition(n),{data:s,setSearchQuery:r,setIncludedPages:o,setPage:l,isFeedsLoading:c,users:u}=(()=>{const[e,n]=(0,i.useState)(""),[t,s]=(0,i.useState)(!1),[a,d]=(0,i.useState)(navigator.onLine),r=(0,i.useRef)(!0),o=(0,i.useRef)(!0),l=(0,h.wA)(),c=(0,h.d4)((e=>e)),u=f.Ay.getters.feeds(c),g=f.Ay.getters.users(c),p=f.Ay.getters.isfeedsLoading(c),v=f.Ay.getters.feedData(c),m=f.Ay.getters.feedCurrentPage(c),x=f.Ay.getters.feedIncludedPages(c),y=(0,i.useCallback)((async()=>{try{s(!0);const r=await l(f.Ay.actions.feeds({limit:10,query:e,page:m}));if(r){let s=[...v];if(e)s=[...null===r||void 0===r?void 0:r.data];else{var n,t;const e={...x};var i,a,d;e.hasOwnProperty(null===r||void 0===r||null===(n=r.data)||void 0===n||null===(t=n.pagination)||void 0===t?void 0:t.page)||(s=[...v,...null===r||void 0===r||null===(i=r.data)||void 0===i?void 0:i.data],e[null===r||void 0===r||null===(a=r.data)||void 0===a||null===(d=a.pagination)||void 0===d?void 0:d.page]=!0,console.log(e),l(f.Ay.actions.setFeedIncludedPages(e)))}l(f.Ay.actions.setFeedData(s)),sessionStorage.setItem("data",JSON.stringify(v)),sessionStorage.setItem("page",JSON.stringify(m)),sessionStorage.setItem("includedPages",JSON.stringify(x))}}catch(r){console.error(r)}finally{s(!1)}}),[v,e,m,x]),w=(0,i.useCallback)((async()=>{try{await l(f.Ay.actions.users())}catch(e){console.error(e)}}),[l]);(0,i.useEffect)((()=>{r.current?r.current=!1:y()}),[m,e]),(0,i.useEffect)((()=>{o.current?o.current=!1:w()}),[w]),(0,i.useEffect)((()=>{const e=()=>d(!0),n=()=>d(!1);return window.addEventListener("online",e),window.addEventListener("offline",n),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}),[]),(0,i.useEffect)((()=>{if(!a&&!r.current){const e=JSON.parse(sessionStorage.getItem("data")),n=JSON.parse(sessionStorage.getItem("page")),t=JSON.parse(sessionStorage.getItem("includedPages"));l(f.Ay.actions.setFeedData(e)),l(f.Ay.actions.setFeedCurrentPage(n)),l(f.Ay.actions.setFeedIncludedPages(t))}}),[a,l]);const A=(0,i.useCallback)((()=>{var e,n;window.innerHeight+window.scrollY>=document.body.scrollHeight-100&&null!==u&&void 0!==u&&null!==(e=u.data)&&void 0!==e&&null!==(n=e.pagination)&&void 0!==n&&n.hasMore&&!p&&!t&&l(f.Ay.actions.setFeedCurrentPage(m+1))}),[u,p,t,m,l]);(0,i.useEffect)((()=>(window.addEventListener("scroll",A),()=>{window.removeEventListener("scroll",A)})),[A]);const j=(0,i.useCallback)((e=>{l(f.Ay.actions.setFeedIncludedPages(e))}),[l]),S=(0,i.useCallback)((e=>{l(f.Ay.actions.setFeedCurrentPage(e))}),[l]);return{data:v,setSearchQuery:n,setIncludedPages:j,searchQuery:e,setPage:S,isFeedsLoading:p,users:g}})();return(0,i.useEffect)((()=>{if(t){const e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})}}),[t,e]),(0,g.jsxs)(a.A,{children:[(0,g.jsx)(d.A,{setSearchQuery:r,setPage:l,setIncludedPages:o}),(0,g.jsxs)(S,{children:[(0,g.jsx)(v,{data:s,isFeedsLoading:c}),(0,g.jsx)(A,{users:u})]})]})},I=(0,i.memo)(P)}}]);
//# sourceMappingURL=626.2c6c7fe6.chunk.js.map